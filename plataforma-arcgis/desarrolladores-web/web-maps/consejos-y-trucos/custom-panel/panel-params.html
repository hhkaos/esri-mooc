<!doctype html>
<!--[if lt IE 9]>  <html class="ie lt-ie9 ie8"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9"> <![endif]-->
<!--[if !IE]><!--> <html> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <title>Mi admin panel</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <!-- get calcite-web css from the cdn (use latest version) -->
  <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-beta.31/css/calcite-web.min.css">
  <!--[if lt IE 9]>
  <script src="/assets/javascripts/libs/selectivizr.js"></script>
  <script src="/assets/javascripts/libs/html5shiv.js"></script>
  <![endif]-->

  <!-- get calcite-web js from the cdn (use latest version) -->
  <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-beta.31/js/calcite-web.min.js"></script>
  <link rel="stylesheet" href="https://js.arcgis.com/3.17/dijit/themes/claro/claro.css">
  <link rel="stylesheet" href="https://js.arcgis.com/3.17/esri/css/esri.css">

  <style>
    body{
      background-color: white
    }
    .esri-bitmap {
          max-width: none;
          transform-origin: top left;
        }
    html, body, #viewDiv {
      height: 100%; width: 100%; margin: 0; padding: 0;
    }
    #viewDiv{
      height: 500px;
    }
  </style>

  <script src="https://js.arcgis.com/3.17/"></script>
  <script>
  require([
      "dojo/parser",
      "dojo/ready",
      "dijit/layout/BorderContainer",
      "dijit/layout/ContentPane",
      "dojo/dom",
      "esri/map",
      "esri/urlUtils",
      "esri/arcgis/utils",
      "esri/dijit/Legend",
      "esri/dijit/Scalebar",
      "dojo/domReady!"
    ], function(
      parser,
      ready,
      BorderContainer,
      ContentPane,
      dom,
      Map,
      urlUtils,
      arcgisUtils,
      Legend,
      Scalebar
    ) {
      ready(function(){

      parser.parse();

//if accessing webmap from a portal outside of ArcGIS Online, uncomment and replace path with portal URL
     //arcgisUtils.arcgisUrl = "https://pathto/portal/sharing/content/items";
      arcgisUtils.createMap("0ad39d05c3834649bb48397afc56a6b2","viewDiv").then(function(response){
        //update the app
        dom.byId("title").innerHTML = response.itemInfo.item.title;
        dom.byId("subtitle").innerHTML = response.itemInfo.item.snippet;

        var map = response.map;



        //add the scalebar
        var scalebar = new Scalebar({
          map: map,
          scalebarUnit: "english"
        });

        //add the legend. Note that we use the utility method getLegendLayers to get
        //the layers to display in the legend from the createMap response.
        var legendLayers = arcgisUtils.getLegendLayers(response);
        var legendDijit = new Legend({
          map: map,
          layerInfos: legendLayers
        },"legend");
        legendDijit.startup();


      });


      });

    });
  </script>
  </script>
</head>
<body>
  <header class="top-nav">
    <div class="grid-container">
      <div class="column-24">
        <!-- desktop sized navigation -->
        <div>
          <!-- logo / home -->
          <a href="#" class="top-nav-title">Mi Backoffice</a>
          <!-- primary navigation sections -->
          <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
            <a class="top-nav-link " href="panel-extension.html">Editor de web map</a>
            <a class="top-nav-link is-active" href="panel-params.html">Otros parámetros</a>
            <a class="top-nav-link " href="panel-extension-form.html">Formulario</a>
          </nav>
          <!-- user specific dropdowns -->
          <nav class="class-top-nav-list right" role="navigation" aria-labelledby="usernav">
            <a class="top-nav-link icon-ui-search" href="#">Buscar</a>
            <a class="top-nav-link icon-ui-collection margin-left-1" href="#">Mis apps</a>
            <a class="top-nav-link icon-ui-user margin-left-1" href="#">Cerrar sesión</a>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <div class="grid-container">
    <div class="column-24">

      <div id="viewDiv"></div>
    </div>
  </div>

  <!-- interactive patterns need to be initialized -->
  <script>
  calcite.init()
  </script>
</body>
</html>
